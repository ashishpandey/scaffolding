x-host-env: &host-env
  PUID: '99'
  PGID: '100'
  UMASK: '022'
  TZ: Asia/Hong_Kong

services:
  emby:
    image: lscr.io/linuxserver/emby
    container_name: emby
    network_mode: bridge
    environment:
      <<: *host-env
    ports:
      - '8096:8096/tcp'
      - '8920:8920/tcp'
      - '1900:1900/udp'
      - '7359:7359/tcp'
    volumes:
      - '/mnt/user/media/:/media:rw'
      - '/mnt/user/video/Processed/:/videos:rw'
      - '/mnt/user/appdata/emby:/config:rw'
    labels:
      traefik.enable: true
      traefik.http.services.emby.loadbalancer.server.port: '8096'
    restart: unless-stopped  
